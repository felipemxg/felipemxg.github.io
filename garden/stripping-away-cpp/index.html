<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/all.min.css><link disabled id=dark-mode-theme rel=stylesheet href=/css/dark.css><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/my_style.css><title>Felipe Marx Digital Garden | Stripping Away C++ - Why I Don't Use References</title><meta name=description content></head><body><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class=container><a class=navbar-brand href=https://estoufelipe.com.br/><b style=font-weight:800>FM</b></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavDropdown aria-controls=navbarNavDropdown aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavDropdown><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class=nav-link href=/garden/>Digital Garden</a></li><li class=nav-item><a class=nav-link href=/projects/>Projects</a></li><li class=nav-item><a class=nav-link href=/library/>Library</a></li><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class="nav-item px-2 pt-1"><a class="btn fas fa-moon" id=dark-mode-toggle></a></li></ul></div></div></nav><div id=content><div class=container style=max-width:800px><div class="py-4 rounded-3"><div class="container-fluid py-2"><h1 class="display-2 mb-4 text-center">Stripping Away C++ - Why I Don't Use References</h1></div><div class="text-center pt-4"></div></div><div class="row justify-content-center mb-5"><div class=col-12><p class="card-date m-0">Created Aug 3, 2022 -
Last updated: Aug 3, 2022</p><hr class=dropdown-divider><div class="row justify-content-between"><div class=col-sm-4><span class=status>Seeding ðŸŒ±</span></div><div class=col-sm-8 style=text-align:right><span class="badge tag-badge">programming</span>
<span class="badge tag-badge">cpp</span></div></div></div></div><div class="container-fluid py-2"><div class="serif main-content"><p>I&rsquo;m a very simple and conservative guy when it comes to programming. My style of choice when coding is a very procedural, data-oriented approach. When I&rsquo;m using C++, I tend to fall back to a more C-style, using the least amount of C++ features possible. There are very good reasons why I like this approach, one of which is speed, both execution time and also compile time. Arseny Kapoulkine has a very in-depth <a href=https://zeux.io/2019/01/17/is-c-fast/>article in his blog</a> showing how his library <em>meshoptimizer</em> had huge improvements in these metrics by stripping away C++ features and using a more C approach.</p><p>One of the features that I tend to not find good use is <em>reference</em>. It seems to create unnecessary complexity by making things less explicit and also can create unoptimized code. Here I will try to give some examples of this.</p><h2 id=a-little-optimization>A little optimization</h2><p>Let&rsquo;s take a very simple example of a 3D vector struct:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>Vector3</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>float</span> <span style=color:#111>x</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>float</span> <span style=color:#111>y</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>float</span> <span style=color:#111>x</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span><span style=color:#111>};</span>
</span></span></code></pre></div><p>If we want to add two vectors together, we would have to add each element of the vector. A C++ way of coding this would be to create a function that accepts two vectors by reference and returns the result:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#111>Vector3</span> <span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#00a8c8>const</span> <span style=color:#111>Vector3</span> <span style=color:#f92672>&amp;</span><span style=color:#111>a</span><span style=color:#111>,</span> <span style=color:#00a8c8>const</span> <span style=color:#111>Vector3</span> <span style=color:#f92672>&amp;</span><span style=color:#111>b</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#111>Vector3</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>x</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>x</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>y</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>y</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>z</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>z</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#111>};</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>This is a surprisingly common pattern you would see in a C++ codebase. But what is the problem with this approach?
Well&mldr; Let&rsquo;s look at the assembly generated. Compiling with clang 14.0.0, with -O3 -march=haswell so we can enable AVX2 instructions, this is the result generated by the first example:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#111>Vector3</span> <span style=color:#111>const</span><span style=color:#f92672>&amp;</span><span style=color:#111>,</span> <span style=color:#111>Vector3</span> <span style=color:#111>const</span><span style=color:#f92672>&amp;</span><span style=color:#111>):</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vmovsd</span>  <span style=color:#111>xmm0</span><span style=color:#111>,</span> <span style=color:#00a8c8>qword</span>  <span style=color:#111>ptr</span> <span style=color:#111>[</span><span style=color:#111>rdi</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vmovsd</span>  <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#00a8c8>qword</span>  <span style=color:#111>ptr</span> <span style=color:#111>[</span><span style=color:#111>rsi</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vaddps</span>  <span style=color:#111>xmm0</span><span style=color:#111>,</span> <span style=color:#111>xmm0</span><span style=color:#111>,</span> <span style=color:#111>xmm1</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vmovss</span>  <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#00a8c8>dword</span>  <span style=color:#111>ptr</span> <span style=color:#111>[</span><span style=color:#111>rdi</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>8</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vaddss</span>  <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#00a8c8>dword</span>  <span style=color:#111>ptr</span> <span style=color:#111>[</span><span style=color:#111>rsi</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>8</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ret</span>
</span></span></code></pre></div><p>At first glance, nothing is wrong with the output. Everything is happening as it should be.
But what if we remove the references, passing the arguments only by value?</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#111>Vector3</span> <span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#111>Vector3</span> <span style=color:#111>a</span><span style=color:#111>,</span> <span style=color:#111>Vector3</span> <span style=color:#111>b</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#111>Vector3</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>x</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>x</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>y</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>y</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>a</span><span style=color:#111>.</span><span style=color:#111>z</span> <span style=color:#f92672>+</span> <span style=color:#111>b</span><span style=color:#111>.</span><span style=color:#111>z</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#111>};</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>This is what we get:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#111>Vector3</span><span style=color:#111>,</span> <span style=color:#111>Vector3</span><span style=color:#111>):</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vaddps</span>  <span style=color:#111>xmm0</span><span style=color:#111>,</span> <span style=color:#111>xmm0</span><span style=color:#111>,</span> <span style=color:#111>xmm2</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>vaddss</span>  <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#111>xmm1</span><span style=color:#111>,</span> <span style=color:#111>xmm3</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ret</span>
</span></span></code></pre></div><p>See the difference? Because we are passing the arguments as pure values, the compiler can optimize it by storing it in the registers and doesn&rsquo;t need to dereference the pointers. You gain a little boost in performance without doing any fancy optimization tricks. The same thing happens in ARM64 architecture (compiled with armv8-a clang version 10.0.1 with flags -O3 -march=armv8-a+simd):</p><p>Using references:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#111>Vector3</span> <span style=color:#111>const</span><span style=color:#f92672>&amp;</span><span style=color:#111>,</span> <span style=color:#111>Vector3</span> <span style=color:#111>const</span><span style=color:#f92672>&amp;</span><span style=color:#111>):</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ldr</span>  <span style=color:#111>d1</span><span style=color:#111>,</span> <span style=color:#111>[</span><span style=color:#111>x1</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ldr</span>  <span style=color:#111>s2</span><span style=color:#111>,</span> <span style=color:#111>[</span><span style=color:#111>x0</span><span style=color:#111>,</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>8</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ldr</span>  <span style=color:#111>s3</span><span style=color:#111>,</span> <span style=color:#111>[</span><span style=color:#111>x1</span><span style=color:#111>,</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>8</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>fadd</span>  <span style=color:#111>v0.2s</span><span style=color:#111>,</span> <span style=color:#111>v0.2s</span><span style=color:#111>,</span> <span style=color:#111>v1.2s</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>mov</span>  <span style=color:#111>s1</span><span style=color:#111>,</span> <span style=color:#111>v0.s</span><span style=color:#111>[</span><span style=color:#ae81ff>1</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>fadd</span>  <span style=color:#111>s2</span><span style=color:#111>,</span> <span style=color:#111>s2</span><span style=color:#111>,</span> <span style=color:#111>s3</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ret</span>
</span></span></code></pre></div><p>Passing arguments by value:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75af00>Vector3Add</span><span style=color:#111>(</span><span style=color:#111>Vector3</span><span style=color:#111>,</span> <span style=color:#111>Vector3</span><span style=color:#111>):</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>fadd</span>  <span style=color:#111>s0</span><span style=color:#111>,</span> <span style=color:#111>s0</span><span style=color:#111>,</span> <span style=color:#111>s3</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>fadd</span>  <span style=color:#111>s1</span><span style=color:#111>,</span> <span style=color:#111>s1</span><span style=color:#111>,</span> <span style=color:#111>s4</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>fadd</span>  <span style=color:#111>s2</span><span style=color:#111>,</span> <span style=color:#111>s2</span><span style=color:#111>,</span> <span style=color:#111>s5</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>ret</span>
</span></span></code></pre></div><p>Quite nice, isn&rsquo;t it?</p><h2 id=visibility>Visibility</h2><p>I believe code should not hide things from the developer. Code should be very explicit and show exactly what it does because it can avoid bugs. References tend to hide something huge about the data being shared with the function: <strong>mutability</strong>. Let&rsquo;s take a function that normalizes the vector and mutates the values (usually, in this case, I would stick with a pure function, without mutations, that returns a Vector3 with the new values, avoiding side effects. This is only for educational purposes):</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>Vector3Normalize</span><span style=color:#111>(</span><span style=color:#111>Vector3</span> <span style=color:#f92672>&amp;</span><span style=color:#111>vector</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#111>vector</span> <span style=color:#f92672>/=</span> <span style=color:#111>vector</span><span style=color:#111>.</span><span style=color:#111>length</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>To call this function we would do something like this:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#111>Vector3</span> <span style=color:#111>vector</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#ae81ff>5.0</span><span style=color:#111>,</span> <span style=color:#ae81ff>3.2</span><span style=color:#111>,</span> <span style=color:#ae81ff>0.0</span> <span style=color:#111>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>Update</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#111>...</span>
</span></span><span style=display:flex><span>	<span style=color:#111>Vector3Normalize</span><span style=color:#111>(</span><span style=color:#111>vector</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>	<span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>This has a problem with visibility. The code for a function that mutates a variable is <strong>exactly the same</strong> as a function that does not mutate anything. In a large codebase, where you have to several calls to different functions and is impossible to keep track of all the state changes in your head, this can be a large source of bugs because you don&rsquo;t know which function does what, when the variable was changed, who changed it. It quickly can become a mess.</p><p>But&mldr; If instead of using a reference, that hides the behavior, and use a pointer, we get the following:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>Vector3Normalize</span><span style=color:#111>(</span><span style=color:#111>Vector3</span> <span style=color:#f92672>*</span><span style=color:#111>vector</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>*</span><span style=color:#111>vector</span> <span style=color:#f92672>/=</span> <span style=color:#111>vector</span><span style=color:#f92672>-&gt;</span><span style=color:#111>length</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>Vector3</span> <span style=color:#111>vector</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#ae81ff>5.0</span><span style=color:#111>,</span> <span style=color:#ae81ff>3.2</span><span style=color:#111>,</span> <span style=color:#ae81ff>0.0</span> <span style=color:#111>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>void</span> <span style=color:#75af00>Update</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#111>...</span>
</span></span><span style=display:flex><span>	<span style=color:#111>Vector3Normalize</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#111>vector</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>	<span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>Now it is much more visible. I know that this function accepts a pointer and will most likely mutate the state. I can avoid a whole sort of headaches by just having the behavior explicit.</p><p>The Rust programming language takes a step further and forces the programmer to be very expressive with mutability and sharing references. For example, let&rsquo;s code the same example of Vector3 in Rust:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>Vector3</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>f32</span> <span style=color:#111>x</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>f32</span> <span style=color:#111>y</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>f32</span> <span style=color:#111>z</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>vector3_normalize</span><span style=color:#111>(</span><span style=color:#111>vector</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>mut</span> <span style=color:#111>Vector3</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#111>vector</span> <span style=color:#f92672>/=</span> <span style=color:#111>vector</span><span style=color:#111>.</span><span style=color:#111>length</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>update</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>let</span> <span style=color:#00a8c8>mut</span> <span style=color:#111>vector</span> <span style=color:#f92672>=</span> <span style=color:#111>Vector3</span> <span style=color:#111>{</span> <span style=color:#111>x</span>: <span style=color:#ae81ff>5.0</span><span style=color:#111>,</span> <span style=color:#111>y</span>: <span style=color:#ae81ff>3.2</span><span style=color:#111>,</span> <span style=color:#111>z</span>: <span style=color:#ae81ff>0.0</span> <span style=color:#111>};</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>..</span><span style=color:#111>.</span>
</span></span><span style=display:flex><span>	<span style=color:#111>vector3_normalize</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#00a8c8>mut</span> <span style=color:#111>vector</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>You can see that Rust forces us to be very expressive, even redundant. At the moment of declaration of the variable <code>vector</code>, I <strong>have</strong> to explicitly use the keyword <code>mut</code> to allow the state of it to be mutable and also when I pass a reference of the variable to a function, using <code>&mut vector</code>. If those conditions aren&rsquo;t met, the compiler will give an error message. Everything has to be <strong>very explicit</strong>, something you don&rsquo;t get with C++&rsquo;s references.</p><h2 id=final-thoughts>Final thoughts</h2><p>I hope with these examples it becomes clear why references tend not to be a good idea. These are just some of the many weirdnesses of C++ that I try to avoid. Generally, simple things are better. C++ will try to overcomplicate things when a simple C style will be more readable, more performant both for compile time and execution time, and easier to debug and maintain. If you want more thoughts about this topic and why the C++ way of thinking tends to be bad, you can check out this <a href="https://www.youtube.com/watch?v=rX0ItVEVjHc">incredible (and quite polemic) talk</a> by Mike Acton at CppCon 2014.</p></div></div></div></div><div class=container><div class="row justify-content-between"><div class=col-sm-4><p class=footer>Theme by Nigalya Ponya | Felipe Marx Â© 2022</p></div><div class="col-sm-6 d-flex flex-row-reverse"><a class="footer-social px-2" href=https://github.com/felipemxg/ target=_blank><i class="fab fa-github"></i></a>
<a class="footer-social px-2" href=https://www.linkedin.com/in/felipemxg/ target=_blank><i class="fab fa-linkedin-in"></i></a></div></div></div><script src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/jquery.min.js></script>
<script src=/js/isotope.pkgd.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity=sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D crossorigin=anonymous async></script>
<script src=/js/dark.js></script>
<script src=/js/isotope.js></script>
<script src=/js/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></body></html>